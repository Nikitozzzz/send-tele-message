# Описание

sendtelegram - программа для отправки сообщений с помощью телеграм-бота прямо из консоли. Изначальная задумка - отправить сообщение после завершения выполнения продолжительной задачи. Например, в Linux: 
```
~$ dd if=~/iso/debian.iso of=/dev/sdb && sendtelegram Образ записан!

~$ ping ya.ru -c 5 > log.txt && sendtelegram --file log.txt Пинг до ya.ru
```



#  Сборка в один исполняемый файл

```
uv run python -m nuitka --standalone --onefile --output-filename=sendtelegram src/send-telegram.py 
```

# Параметры запуска

sendtelegram [параметры] message


* **--config** - запуск с использованием конкретного конфигурационного файла (если не указан, то в домашней директории создается папка .send-tele-message и файл config.json в ней)
* **--set-token** - установка токена бота
* **--add-chat** - запись в память id чата (короткое имя, chat_id)
* **--remove-chat** - удалить чат из памяти
* **--print-chats** - вывести список сохраненных чатов
* **--set-default-chat** - устанавливает чат по-умолчанию
* **--chat** - отправить в конкретный чат (из сохраненных по имени или по chat_id)
* **--file** - отправить документ - в этом случае message будет подписью
* **--image** - отправить изображение - в этом случае message будет подписью
* **--audio** - отправить аудио-файл - в этом случае message будет подписью

# Процесс настройки

1) Создать бота в телеграм с помощью [Bot Father @BotFather](https://t.me/BotFather), скопировать токен
2) Выполнить и следовать инструкциям:
```
sendtelegram --set-token
```
3) Зайти в телеграм в созданый на п.1 бот и написать ему /start (бот может писать только тем кто ему написал)
4) С помощью бота [Get My ID @getmyid_bot](https://t.me/getmyid_bot) узнать свой id
5) Добавить в список чатов свой id и сделать его по-умолчанию:
```
sendtelegram --add-chat --set-default-chat
```
# Примеры
* Отправить сообщение в чат по-умолчанию (сохраненный с помощью --add-chat и установленный как чат по-умолчанию --set-default):
```
sendtelegram Привет, мир!
```
* Отправить файл в чат по-умолчанию и добавить подпись:
```
sendtelegram --file test.log Логи за сегодня
```
* Отправить изображение в чат по-умолчанию и добавить подпись:
```
sendtelegram --image screenshot.png Скриншот после выполнения скрипта
```
* Отправить сообщение пользователю по его chat_id:
```
sendtelegram --chat 1234567890 Привет, мир!
```
* Отправить сообщение пользователю по его имени (из списка сохраненных чатов с помощью --add-chat):
```
sendtelegram --chat username Привет, мир!
```
